---
published: true
layout: post
title: python标准库-内建函数
category: python
tags: 
  - python
time: 2017.03.21 20:31:00
excerpt: 余弦:我没看过python的书，但我通读过python文档。文档不过一遍，视野会局限。近日读sqlmap源码，发现自己对于标准库所知甚少，想到knownsec技能表中余弦的一番话，加之最近有意提升English能力，遂意通读python2.7.13官方文档，去粗取精，译成中文，国内虽有一译站点已有翻译，但为参考。然本钱平平，词不达意，技止于此，望看客海涵。

---

余弦:我没看过python的书，但我通读过python文档。文档不过一遍，视野会局限。
近日读sqlmap源码，发现自己对于标准库所知甚少，想到knownsec技能表中余弦的一番话，加之最近有意提升English能力，遂意通读python2.7.13官方文档，去粗取精，译成中文，国内虽有一译站点已有翻译，但为参考。然本钱平平，词不达意，技止于此，望看客海涵。

<!--more-->

## python标准库-内建函数
python有很多始终可用的内建函数。

- abs(x)
	- 返回x的绝对值，x可以是整型、长整型或浮点数。如果x是复数，则返回模。
- all(iterable)
	- 如果iterable中所有元素都为真或iterable为空，则返回True。
- any(iterable)
	- 如果iterable中任一元素为真，则返回True。如果iterable为空，返回False。
- basestring()
	- str和unicode类型的虚基类。不可以被直接调用或实例化，但是可以用来测试一个对象是否是str或unicode的实例。
	- isinstance(obj, basestring)
	- 等价写法：isinstance(obj, (str, unicode))
- bin(x)
	- 将整数转为二进制串，结果是有效的python表达式。如果x不是python int对象，那么x需要定义一个__index__()方法来返回一个整数。
- class bool([x])
	- 返回一个Boolean值，只能是True或False。x会通过标准的真值测试过程处理。如果x为假或者被忽略，则返回False，否则返回True。bool也是一个class，且是int的子类。bool类不能被继承，它仅有的两个实例是False和True。
- class bytearray([source[, encoding[, errors]]])
	- 返回一个字节数组。bytearray类是一个0到256的不定整数序列。它拥有不定序列（Mutable Sequence）类型和str类型的大多数常用方法。
	- 可选参数source可以有几种不同方法来初始化array。
		- unicode 需要给定encoding，bytearray利用unicode.encode()将unicode转成bytes
		- integer 定义数组尺寸并用null填充
		- 遵循buffer接口的对象 对象的只读buffer会用来初始化bytearray
		- iterable 必须是0-256整数的迭代器，用于初始化array
	- 如果没有参数，则bytearray尺寸为0。
- callable(object)
	- 如果object表现为可调用，则返回True，否则返回False。若返回True，则call依然可能会失败。但如果返回False，那么call永远不会成功。class是可调用的（返回一个新实例）。如果类实例拥有__call__方法，则也是可调用的。
- chr(i)
	- 返回一个单字符string，其ASCII码为i。与ord()相反。i范围必须是0-255，越界则抛ValueError。
- classmethod(function)
	- 返回function的类方法
	- 类方法将类作为第一个隐式参数，和实例方法接收实例类似。定义一个类方法，按如下写：	
	
```python
class C(object):
	@classmethod
	def f(cls, arg1, arg2, ...):
		...
```
	- @classmethod格式是一个函数装饰器。
	- 类方法既可以被class调用（如C.f()），也可以被类实例调用（如C().f()）。如果继承类调用了父类方法，第一个隐式参数将选择继承类。
	- Python的类方法和C++、Java的静态成员函数不太一样。Python额外提供类似的staticmethod()。
- cmp(x,y)
	-比较两个对象x和y，根据结果返回一个integer。如果x<y则返回负数，x==y则返回0，x>y则返回正数。
- compile(source, filename, mode[, flags[, dont_inherit]])
	- 编译源码制成code或AST对象。可以通过exec和eval()来执行code对象。source可以是Unicode字符串，Latin-1编码字符串或AST对象。AST对象可参考ast模块。
	- filename用于指定从哪个文件读code。
	- mode表明需要编译哪种code。如果source包含一序列语句的话可设为exec，单语句可设为eval，单交互式语句可设为single。
	- 可选参数flags和dont_inherit控制哪些future语句影响编译。如果都不设定（或都为0）的话，使用调用compile的代码当前有效的future语句来编译。如果只出了flags参数，则除了本该使用的future语句之外，由flags指明的future语句也会影响编译。如果dont_inherit是非0整数，flags被忽略。
	- future语句由bit位指明，这些bit可以做或运算来指明多个语句。可以在__future__模块中，_Feature实例的compiler_flag属性找到指明功能的bit位。
	- 如果source不合法，则抛SyntaxError异常。如果source包含null，则抛TypeError异常。
	- 如果想把python code保存为AST格式，看看ast.parse()。
	> 当以single或eval mode来编译多行source时，输入必须以一个空行结尾，用于更好的区别是否未竟。
	
- class complex([real[, imag]])
	- 返回一个值为real+imag*1j的复数。也可以将string或number转为复数。如果first参数为string，那么其将被解释成复数且与此同时不可有第二个参数。第二个参数永远不会是string。每个参数都可以是数值类型（包含complex本身）。如果imag被忽略，则默认取0，此时complex表现类似int()、long()、float()。如果两个参数都缺省，则返回0j。
	> 如果参数为string，则+/-号旁不允许有空白字符。
	
- delattr(object, name)
	- name为object的某个属性。该函数会删除该属性。与setattr()相反。
- class dict(**kwarg)
- class dict(mapping, **kwarg)
- class dict(iterable, **kwarg)
	- 创建一个字典。
- dir([object])
	- 如果没有参数，则返回当前局部范围内所有name。如果有参数，则返回object的所有有效的属性list。
	- 如果object有一个方法叫__dir__()，则会调用该方法。这允许对象实现一个自定义的__getattr__()或__getattribute__()方法来定制dir()返回的属性。
	- 如果object不支持__dir__(),该函数则尽可能从object的__dict__属性(如果有定义的话)和type object收集。此时结果是不完整的，如果对象有一个自定义的__getattr__()，则甚至可能是错的。
	- 对于不同类型object来说，默认的dir()原理大相径庭。它试图产生最相关而不是最完整的信息。
		- 如果object是module object，list包括modules所有属性的名。
		- 如果object是一个type或class object，list包含它的所有属性名，递归到它的祖先类。
		- 其他情况，list包含object的属性名，object所属class的属性名，也递归到祖先类。
- divmod(a,b)
	- 返回非复数a、b的商和余数。对integer来说，相当于(a // b, a % b)。
- enumerate(sequence, start=0)
	- 返回一个枚举对象。sequence必须是序列类型、iterator或其他支持迭代的对象。enumerate()返回的iterator的next()方法返回一个元组，它包含一个从start开始计数和从sequence中迭代得到的值。
- eval(expression[, globals[, locals]])
	- 参数是Unicode或Latin-1编码的字符串。可选参数globals如果提供，则必须是一个字典，locals提供则必须是一个任何映射的对象。
	- expression被当做python表达式来解析并演算，globals和locals字典作为全局和局部命名空间。如果globals存在，且缺少__builtins__，在expression被解析之前，当前的全局变量被拷贝进globals。这意味着一般来说expression能完全访问标准__builtin__模块，且受限的环境会传播。如果locals字典被忽略，则取globals作为默认字典。如果两个字典都被忽略，则在eval被调用的环境执行。
- execfile(filename[, globals[, locals]])
	- 和exec类似，但是传递的是一个文件名而不是string。它和import不同以至于它不使用模块管理——它无条件的读取文件，并不产生新的module。
	- 参数为文件名和两个可选字典。文件内容如同python顺序语句解析一样，使用globals和locals字典作为命名空间。locals可以是任意映射对象。记住在模块层面，globals和locals是相同的字典。如果两个独立的对象作为globals和locals，代码会像把二者嵌入在同一class定义中那样执行。
	- 如果locals缺省，则默认采用globals字典。如果二者都缺省，则表达式在execfile()调用的环境中执行。返回的值是None。
- file(name[,mode[,buffering]])
	- file类型的构造函数。构造函数的参数和下述的open()一致。
	- 要打开一个文件，建议用open而不是直接调用该构造函数，file更适合用于类型测试（比如，isinstance(f,file)）。
- filter(function, iterable)
	- 用那些使得function返回True的iterable子集构造一个list。iterable可以是个支持迭代的序列，或者是一个迭代器。如果iterable是string或元组，则结果也是string或元组。否则结果总是列表。如果function是None，那么所有值为False的iterable元素被移除。
	- 注意，在function不是None的情况下，filter(function, iterable)等同于[item for item in iterable if function(item)]；否则等同于[item for item in iterable if item]。
-class float([x])
	- 将字符串或数字转为浮点数。如果参数是字符串，它必须包含小数或浮点数（可以有符号），周围可以有空白字符。参数也可以是[+|-]nan或者[+|-]inf。其他情况下，参数可以是整型/长整型或浮点数，此时返回等值的浮点数。如果没有参数，则返回0.0。
	- 注意，传递字符串时，依赖于底层C库，可以返回NaN和Infinity这样的值。该函数接受字符串nan，inf和-inf。对于NaN，不区分大小写和正负，总是用nan。
- format(value[, format_spec])
	- 将value转为“格式化”的表现形式，格式由format_spec控制。对format_spec的解释依赖于value的参数类型。
- frozenset([iterable])
	- 返回一个新的frozenset对象，如果iterable存在，则frozenset的元素由iterable决定。frozeset是个内置类。
- getattr(object,name[,default])
	- 返回object的属性名为name的值。name必须是一个字符串。如果name属性不存在，且有default参数，则返回default，否则抛AttributeError。
- globals()
	- 返回表示当前全局符号表的字典。它总是当前模块的字典（在函数或方法中，指定义的模块而非调用的模块）。
- hasattr(object, name)
	- 如果object拥有名为name的属性，则返回True，否则返回False（实际上是通过调用getattr(object, name)，看是否会抛异常来实现的）。
- hash(object)
	- 返回object的哈希值（如果有的话）。哈希值是一串整数。在字典查询时，用来快速比对字典键。相等的数值拥有相同的哈希值（尽管是不同类型，比如1和1.0）。
- help([object])
	- 调用内置的help系统。（该函数一般用于交互使用。）如果没有指定参数，则交互帮助系统在解释器终端启动。如果参数为string，则string作为module、function、class、method的名字，关键字或者是未文档化的主题，终端会打印一个帮助页面。如果参数是其他类型的对象，	则生成一个该对象的帮助页面。
	- 该函数被site模块加进了内置的命名空间。
- hex(x)
	- 将integer转为小写的十六进制数值串，具有0x前缀。
	- 如果x不是python的int或long类型，则x需要自定义一个__index__()方法，且其返回一个integer。
- id(object)
	- 返回一个object的id。id是个integer，用于保证在object生命周期中是独一无二且恒定的。两个生命周期不产生交集的object，可能会有同样值的id。
	- 实现细节：id是object在内存的地址。
- input([prompt])
	- 等价于eval(raw_input(prompt))。
	- 该函数并不catch用户的错误。如果输入语法无效，会抛一个SyntaxError。如果在求值时遇到其他错误也会抛出该异常。
	- 如果readline模块被加载了，那么input()会提供更精巧的行编辑以及历史特性。
	- 也会的常规输入，请考虑用raw_input()。
- class int(x=0)
- class int(x, base=10)
	- 返回一个由数值或string转成的integer对象。如果不给参数，则返回0。如果x是一个number，那么它可以是一个int或long或float。如果x是float，转换向0截断。如果参数超出了integer的范围，则返回一个long对象代替。
	- 如果x非number，则x必须是一个string或Unicode对象，且要是按某种进制的逐字integer。可以以+或-开头（和number间不能有空白）。默认进制为10。允许的范围是0和2-36。二进制、八进制和十六进制可以以0b/0B，0o/00/0，0x/0X开头。0意味着单纯的将string串当成integer，无需进制转换。
- isinstance(object, classinfo)
	- 如果object是个classinfo实例，则返回True（子类也可以，直接+间接+虚）。如果classinfo是一个类型对象，object是该类型的对象，也返回True。否则返回False。如果classinfo是一个元组，元组里有多个class或type对象，那么只要object是其中之一的实例，则返回True。如果classinfo既不是class，也不是type，又不是装class和type的元组，则抛TypeError。
- issubclass(class, classinfo)
	- 如果class是classinfo的子类（直接，间接，虚），则返回True。class也是自己的子类。classinfo可以是一个元组，元组里存放多个class对象，此时将会检查元组内所有class。其他情况下，抛TypeError。
- iter(o[, sentinel])
	- 返回一个iterator对象。首参的意义取决于第二个参数。如果没有第二个参数，则o必须是一个支持迭代（拥有__iter__()方法）或顺序协议（拥有__getitem__()方法）的集合对象。如果两种协议都不支持，则抛TypeError。如果sentinel给定，那么o必须是一个callable object。iterator会以无参数形式call o的next()方法，如果value和sentinel相等，则抛StopIteration。否则该值会返回。
	- 对第二个参数来说，一个有用的应用是用iter()来按行读文件，直到一个确切的想要停止的行。下面的例子展示了如何按行读文件直到遇到一个空行。

```python
with open('mydata.txt') as fp:
	for line in iter(fp.readline, ''):
		process_line(line)
```
- len(s)
	- 返回对象的尺寸（拥有几个元素）。参数可以是一个序列（string,bytes,tuple,list或range）或者一个容器(dictionary,set,frozen set)。
- class list([iterable])
	- 根据iterable迭代的元素返回一个相同的列表。iterable可以是序列，支持迭代的容器，或一个支持迭代的对象。如果iterable已经是一个list，则简单的copy并返回（类似iterable[:]）。list('abc')返回['a','b','c']；list((1,2,3))返回[1,2,3]。如果没有参数，则返回空列表,[]。
	- list是一个可变的序列类型。	
- locals()
	- 更新并返回一个表示当前局部符号表的字典。如果在function代码块而非class块中调用locals()，则返回游离的变量。
	- 注意：字典的内容不应该被修改；对其值得修改不会影响解释器对local和free变量的使用。
- class long(x=0)
- class long(x, base=10)
	- 返回一个由数值或字符串x转成的long对象。如果x是string，则必须包含一个数字，任意大小，可以有符号，周围可以有空白字符。base参数和int()的等同，且只有x是string时才能给定。其他情况下，参数可以是原始或长整型或浮点数，此时会返回一个等值的long。浮点数会向0截断。如果没有参数，则返回0L。
- map(function, iterable, ...)
	- 对迭代器的每个元素执行function，并返回一个结果list。如果有额外的iterable参数，则并行的从这些参数中取元素，执行function。如果参数参差不齐，则以None扩展参数元素。如果有多个参数，map()返回一元组列表，元组包含从各个参数中取得的对应的元素。iterable可以是任意序列或任意可迭代对象，结果总是列表。
- max(iterable[, key])
- max(arg1,arg2,*args[,key])
	- 返回iterable元素中最大的元素，或者返回2个或多个参数中最大的参数。
	- 如果有一个位置参数，iterable必须是个非空可迭代对象（如非空字符串，元组或列表）。此时返回可迭代对象中最大的一个。如果有两个或更多的位置参数，则返回最大位置参数。
	- key指明了有一个参数的排序函数，如list.sort()中使用的排序函数。如果有key参数，它必须写成key=的形式（例如max(a,b,c,key=func)）。
- memoryview(obj)
	- 根据obj参数，返回一个“内存视图”对象。
- min(iterable[, key])
- min(arg1, arg2, *args[, key])
	- 返回迭代器或多个参数中最小的元素。
	- 如果有一个位置参数，则iterable必须是非空可迭代的（如非空字符串，元组或列表）。最小的元素会返回。如果有两个以上的位置参数，则返回最小的那个位置参数。
	- key指明了有一个参数的排序函数。如list.sort()中使用的排序函数。如果有key参数，必须写成key=的形式，同max。
- next(iterator[, default])
	- 通过调用iterator的next()方法，得到它的下一个元素。如果有default参数，在迭代器迭代完所有元素后返回该参数，否则抛StopIterator。
- object()
	- 返回一个新的无特征的对象。object是所有类的基类。它具有对所有子类实例通用的方法。
- oct(x)
	- 将一个任意大小整数转成一个八进制字符串。结果是一个合法的python表达式。
- open(name[, mode[, buffering]])
	- 打开一个文件，返回一个file类型的对象。如果文件打不开，则抛IOError。打开文件请优先使用open()，而不是直接调用file构造函数。
	- 前两个参数和C的stdio库的fopen()函数想死。name是名字，mode是打开姿势。
	- mode常用值包括：'r'读文件,'w'写文件（如果文件存在则截断）,'a'附加。如果没有mode，默认是'r'，默认使用文本模式，会在写文件时将'\n'转换成平台特定字符，在读文件时转回来。因此打开二进制文件时，要指定'b'来增强移植性。
	- buffering指明了文件需要的缓冲大小，0意味着无缓冲，1意味着行缓冲；其他正数表示缓冲区大小。负数则表示使用系统默认值。一般对于tty，是行缓冲，对其他文件，是全缓冲。如果没有参数，则用默认值。
	- 模式'r+'、'w+'和'a+'打开文件以便更新（同时读写）。'w+'会截断文件。区分文本文件和二进制文件的系统上，mode附加'b'会以二进制打开。不区分的系统上，'b'无效。
	- 除了标准的fopen() mode值外，还可以是'U'或'rU'。构建python时一般会添加universal newline支持。'U'以文本文件方式打开，但是行可以以'\n','\r'或'\r\n'结束。python通常认为他们都是'\n'。如果构建python时没添加对universal newline的支持，则mode的'U'和普通文本一样。
- ord(c)
	- 给定一个长度为1的字符串，如果参数是Unicode对象，则返回表示整型的Unicode code point。如果是八位字符串，则返回字节值。比如ord('a')返回97，ord(u'\u2020')返回8224。chr()或unichr()的相反操作。如果参数是Unicode且构建Python时添加了UCS2 Unicode支持，那么字符的码点必须在[0..65535]的闭区间；如果字符串的长度为2，则抛出TypeError。
- pow(x,y[,z])
	- 返回x的y次幂，如果z提供了，则返回x的y次幂，再对z取模。
	- 参数必须是数字类型。由于操作数是混合类型的，二进制计算时需要一些强制规定。对int和long，计算结果与本身一致。如果第二个参数是负数，则所有参数都被转成float，返回float。如果第二个参数是负数，则第三个参数必须省略。
- print(*objects,sep='',end='\n',file=sys.stdout)
	- 以sep分割，end结尾，将对象打印到文件流中。如果sep,end和file提供了，则必须以键值形式书写。
	- 所有非键值形式提供的参数，都被转成字符串，相当于被str()。然后写到文件流中，以sep分割，end结尾。sep和end都必须是字符串，也可以留成None，这时用默认值。如果没有打印对象，print()只打印一个结束符号end。
	- file一定要是含有write(string)方法的对象；如果该参数为空，或为None，默认使用sys.stdout输出。输出缓冲方式由file本身决定。例如以file.flush()确保立即显示。
- property([fget[, fset[, fdel[, doc]]]])
	- 返回新类（继承object）的一个属性。
	- fget是用于获取属性值的函数，fset时设置属性值的函数，fdel用于删除属性。如果给出doc，则作为该属性的文档字符串。否则该属性拷贝fget的文档字符串。
	- 典型的用法：

```python
class C(object):
	def __init__(self):
		self._x = None
	
	def getx(self):
		return self._x
	def setx(self, value):
		self._x = value
	def delx(self):
		del self._x
	x = property(getx,setx,delx,"I'm the 'x' property.")
```
	- 如果c是C的实例，则c.x将调用获取函数，c.x = value调用设置函数，del c.x调用删除函数。

## 待续。。。